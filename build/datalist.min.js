!function(a,b,c){"use strict";angular.module("ambersive.datalist",["ambersive.rest","ambersive.helper"]),angular.module("ambersive.datalist").run(["$rootScope",function(a){}]),angular.module("ambersive.datalist").provider("$datalistSettings",[function(){var a="src/views/datalist.default.html",b="entries",c="title",d="id",e=25,f=function(b){return a=b},g=function(a){return c=a},h=function(a){angular.isNumber(a)&&(e=a)},i=function(a){b=a};return{setTemplatePath:f,setTitleValue:g,setEntriesPerPage:h,setEntriesValue:i,$get:function(){return{templatePath:a,titleValue:c,identityValue:d,entriesPerPage:e,entriesValue:b}}}}]),angular.module("ambersive.datalist").factory("DatalistSrv",["$q","$log","$rootScope","$datalistSettings","RestSrv","HelperSrv",function(a,b,c,d,e,f){var g;return g}]),angular.module("ambersive.datalist").filter("range",function(){return function(a,b){b=parseInt(b);for(var c=0;b>c;c++)a.push(c);return a}}),angular.module("ambersive.datalist").directive("datalist",["$compile","HelperSrv","$log",function(a,b,d){var e={};return e.restrict="E",e.replace=!0,e.transclude=!0,e.scope={uniqueName:"@",ctrl:"@",restUrl:"@",restDeleteUrl:"@",templateUrl:"@",titleValue:"@",identityValue:"@",entriesPerPage:"@",entriesValue:"@",identify:"@",detailRoute:"@"},e.controller=["$rootScope","$scope","$controller","$datalistSettings","RestSrv","HelperSrv",function(a,b,e,f,g,h){b.templatePath=f.templatePath,b.broadcastID=h.generator.alphanumeric(10),b.total=0,b.pages=1,b.currentPage=1,b.data=[],b.uiRouterAvailable=!1,b.actionDisabled=!0,b.allSelected=!1,b.selectedData=[],b.uniqueName===c&&(b.uniqueName="datalist"),(b.templateUrl===c||""===b.templateUrl)&&(b.templateUrl=f.templatePath),(b.titleValue===c||""===b.titleValue)&&(b.titleValue=f.titleValue),(b.identityValue===c||""===b.identityValue)&&(b.identityValue=f.identityValue),b.entriesPerPage===c||""===b.entriesPerPage?b.entriesPerPage=f.entriesPerPage:b.entriesPerPage=parseInt(b.entriesPerPage),(b.entriesValue===c||""===b.entriesValue)&&(b.entriesValue=f.entriesValue);var i=function(a){a.data.total!==c&&angular.isNumber(a.data.total)&&(b.total=a.data.total,b.pages=Math.ceil(b.total/b.entriesPerPage));var e=b.entriesValue;if(a.data[e]!==c&&angular.isArray(a.data[e])){b.data=a.data[e];for(var f=b.data.length,g=0;f>g;g++)b.selectedData.indexOf(b.data[g][b.identityValue])>-1?b.data[g].isSelected=!0:b.data[g].isSelected=!1}else d.warn('ambersive.datalist: Json result doesn`t fit the datalist pattern {"total":0,"'+e+'":[]}')};b.itemCheckClickAll=function(a,d){b.allSelected=a;var e=function(f,g){for(var h=f.length,i=0;h>i;i++)a===!0?(-1===b.selectedData.indexOf(f[i][d])&&(f[i][d]?b.selectedData.push(parseInt(f[i][d])):b.selectedData.push(f[i][d])),f[i].children!==c&&e(f[i].children,function(a){f[i].children=a})):b.selectedData=[],f[i].isSelected=a,i+1===h&&g(f)};e(b.data,function(a){b.data=a,b.listBroadcast()})},b.insertItemClick=function(a,e,f,g){var h=-1;(e===c||null===e)&&(e=!1);try{h=b.selectedData.indexOf(f[g]),-1===h&&e===!0?b.selectedData.push(f[g]):b.selectedData.splice(h,1)}catch(i){d.error(i)}b.listBroadcast()},b.setActionDisabled=function(){b.selectedData.length>0?b.actionDisabled=!1:b.actionDisabled=!0},b.setPage=function(a){b.currentPage=parseInt(a),b.init()},b.setPreviousPage=function(){b.currentPage>1&&(b.currentPage--,b.setPage(b.currentPage))},b.setNextPage=function(){b.currentPage<b.pages&&(b.currentPage++,b.setPage(b.currentPage))},b.getData=function(a){a===c&&(a=b.restUrl),g.call({method:"GET",url:a},function(a){i(a)})},b.open=function(a){d.warn("ambersive.datalist: Please define a $scope.open function or use detail-route parameter")},b.deleteWarning=function(a,b){b&&b(!0)},b["delete"]=function(a){var d=b.restUrl,e=a.length,f=0,h=function(a){g.call({method:"DELETE",url:d+"/"+a},function(a){200!==a.status&&f++})};b.restDeleteUrl!==c&&""!==b.restDeleteUrl&&(d=b.restDeleteUrl),b.deleteWarning(a,function(c){if(c!==!1){f=0;for(var d=0;e>d;d++)h(a[d]),d+1===e&&(b.init(),b.deleteBroadcast(f,a),a=[],b.selectedData=a)}})},b.init=function(){var d="";try{angular.module("ui.router"),b.detailRoute!==c&&""!==b.detailRoute&&(b.uiRouterAvailable=!0)}catch(e){}b.restUrl!==c&&""!==b.restUrl?angular.isFunction(b.getData)===!0&&(1!==b.currentPage&&(d="?page="+b.currentPage),b.getData(b.restUrl+d)):b.getData=function(){a.$broadcast("get"+b.uniqueName.toUpperCase())}},b.listBroadcast=function(){var c={allSelected:b.allSelected,selectedData:b.selectedData};b.setActionDisabled(),a.$broadcast("update"+b.uniqueName.toUpperCase(),c)},b.deleteBroadcast=function(c,d){a.$broadcast("delete"+b.uniqueName.toUpperCase(),{errors:c,ids:d})},b.$on("return"+b.uniqueName.toUpperCase(),function(a,b){i(b)});var j=function(a){if(a!==c)try{return e(a,{$scope:b})}catch(f){d.error(f)}};j(b.ctrl),b.init()}],e.link=function(c,d,e){try{var f=b.template.forUrl(c.templateUrl);if(""===f||null===f)throw"ambersive.datalist: template is empty";d.html(f),d.replaceWith(a(d.html())(c))}catch(g){alert(g)}},e}])}(window,document,void 0),angular.module("ambersive.datalist").run(["$templateCache",function(a){"use strict";a.put("src/views/datalist.default.html",'<div class=datalist_container><div class=datalist_header></div><div class=datalist_body><ul><li ng-if="data.length > 0" class=header><div class="row header"><div class="col-sm-8 col-xs-8"><div class=checkbox><label><input type=checkbox ng-model=allSelected ng-click="itemCheckClickAll(allSelected,\'id\');"></label></div></div><div class="col-sm-4 col-xs-4"><div class=btn-group role=group><button type=button class="btn btn-default" ng-disabled=actionDisabled ng-click=delete(selectedData);><i class="glyphicon glyphicon-remove"></i></button></div></div></div></li><li ng-repeat="row in data"><div class=row><div class="col-sm-8 col-xs-8"><div class=checkbox><label><input type=checkbox ng-model=row.isSelected ng-click=insertItemClick($event,row.isSelected,row,identityValue);> {{ row[titleValue] }}</label></div></div><div class="col-sm-4 col-xs-4"><div class=btn-group role=group><button type=button class="btn btn-default" ng-if="uiRouterAvailable === true" ui-sref={{detailRoute}}({id:row[identityValue]})><i class="glyphicon glyphicon-info-sign"></i></button> <button type=button class="btn btn-default" ng-if="uiRouterAvailable === false" ng-click=open(row[identityValue]);><i class="glyphicon glyphicon-info-sign"></i></button> <button type=button class="btn btn-default" ng-click=delete([row[identityValue]]);><i class="glyphicon glyphicon-remove"></i></button></div></div></div></li></ul><nav ng-if="pages > 1"><ul class=pagination><li ng-click=setPreviousPage();><span aria-hidden=true>&laquo;</span></li><li ng-repeat="n in [] | range:pages" ng-click=setPage(n+1);><span>{{n+1}}</span></li><li ng-click=setNextPage();><span aria-hidden=true>&raquo;</span></li></ul></nav></div></div>')}]);